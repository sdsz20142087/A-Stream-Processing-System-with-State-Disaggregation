syntax = "proto3";
option java_package="pb";
import "google/protobuf/empty.proto";
/*
Control Plane's RPC handler protocols,
include:
1. TM registry
2. Routing table RPC (state service)
3. ...?
 */

message RegisterTMRequest {
    string name = 1;
    string address = 2;
    int32 port = 3;
}

message RegisterTMResponse {
    string status = 1;
}

message DeregisterTMRequest {
    string name = 1;
}

message DeregisterTMResponse {
    string status = 1;
}

// allow TMs to register at CP
service CPService {
    rpc RegisterTM(RegisterTMRequest) returns (RegisterTMResponse);
    rpc DeregisterTM(DeregisterTMRequest) returns (DeregisterTMResponse);
    rpc findRemoteStateAddress(findRemoteStateAddressRequest) returns (findRemoteStateAddressResponse);
    rpc addRemoteStateAddress(addRemoteStateAddressRequest) returns (addRemoteStateAddressResponse);
    rpc removeRemoteStateAddress(removeRemoteStateAddressRequest) returns (removeRemoteStateAddressResponse);
    rpc updateRemoteStateAddress(updateRemoteStateAddressRequest) returns (updateRemoteStateAddressResponse);
}

message findRemoteStateAddressRequest{
    string stateKey=1;
}

message findRemoteStateAddressResponse{
    string address=1;
}

message addRemoteStateAddressRequest{
    string stateKey=1;
    string address=2;
}

message addRemoteStateAddressResponse{
    string address=1;
}

message removeRemoteStateAddressRequest{
    string stateKey=1;
}

message removeRemoteStateAddressResponse{

}

message updateRemoteStateAddressRequest{
    string stateKey=1;
    string address=2;
}

message updateRemoteStateAddressResponse{

}

